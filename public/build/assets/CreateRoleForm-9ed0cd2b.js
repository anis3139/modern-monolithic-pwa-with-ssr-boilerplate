import{u as j,x as W,o as u,g as p,d as c,a as m,b as a,j as v,v as b,F as x,m as k,w as y,T as $,f as E,e as F,h as G}from"./app-a07534fc.js";import{_ as C}from"./InputError-819a2731.js";import{_ as d}from"./InputLabel-0d88b11e.js";import{_ as O}from"./PrimaryButton-f1dd44c4.js";import{_ as U}from"./TextInput-6d371888.js";const B=["onSubmit"],R={class:"grid grid-cols-6 justify-items-start gap-1"},T={class:"flex items-center gap-1 my-5"},z=["checked"],I={class:"grid md:grid-cols-4 grid-cols-3 gap-5 pr-5 sm:pr-0"},M={class:"flex items-center gap-1 mb-5"},N=["value","checked","onClick"],A=["value","onUpdate:modelValue"],D={class:"flex items-center justify-end pr-5 py-5"},L={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},X={__name:"CreateRoleForm",props:{permissionWithGroup:Object,permissions:Object,all_group:Object,total_permissions:String,total_group:String},setup(g){const i=g,e=j({name:"",permissions:[],group_name:[],is_all_selected:!1}),V=t=>{t?(e.permissions=_.clone(i.permissions),e.group_name=_.clone(i.all_group)):(e.permissions=[],e.group_name=[])},h=t=>{let l="";for(const s in i.permissionWithGroup){let o=i.permissionWithGroup[s].find(r=>r.name==t);o&&(l=o==null?void 0:o.group_name)}return l};W(()=>e.permissions,(t,l)=>{let s="";l.length>t.length?s=h(_.difference(l,t)[0]):l.length<t.length&&(s=h(_.last(t)));let n=_.includes(e.group_name,s),o=i.permissionWithGroup[s],r=_.filter(t,function(f){return f.indexOf(s)>-1});t.length==i.permissions.length?(e.is_all_selected=!0,e.group_name=_.clone(i.all_group)):e.is_all_selected=!1,n&&(o==null?void 0:o.length)!==(r==null?void 0:r.length)?_.remove(e.group_name,f=>f===s):!n&&(o==null?void 0:o.length)==(r==null?void 0:r.length)&&(_.includes(e.group_name,s)||e.group_name.push(s))});const w=t=>{let l=i.permissionWithGroup[t];_.includes(e.group_name,t)?(_.remove(e.group_name,s=>s===t),_.forEach(l,function(s){_.remove(e.permissions,n=>n===s.name)})):(e.group_name.push(t),_.forEach(l,function(s){_.includes(e.permissions,s.name)||e.permissions.push(s.name)})),e.group_name.length==i.total_group?e.is_all_selected=!0:e.is_all_selected=!1},S=()=>{e.post(route("admin.role.store"),{preserveScroll:!0,onSuccess:()=>e.reset(),onError:()=>{e.errors.name&&(e.reset("name"),nameInput.value.focus()),e.errors.permissions&&e.reset("permissions")}})};return(t,l)=>(u(),p("section",null,[c("form",{onSubmit:E(S,["prevent"]),class:"mt-6 space-y-6 p-3"},[c("div",R,[m(d,{for:"current_password",value:"Role Name :",class:"text-xl self-center"}),m(U,{id:"name",ref:"nameInput",modelValue:a(e).name,"onUpdate:modelValue":l[0]||(l[0]=s=>a(e).name=s),type:"text",class:"mt-1 block w-full col-span-5",autocomplete:"name"},null,8,["modelValue"]),m(C,{message:a(e).errors.name,class:"mt-2 col-start-2 col-span-4"},null,8,["message"])]),c("div",T,[m(d,{for:"is_all_selected",value:"Select All",class:"text-2xl capitalize mr-2"}),v(c("input",{type:"checkbox",id:"is_all_selected","onUpdate:modelValue":l[1]||(l[1]=s=>a(e).is_all_selected=s),class:"checkbox w-6 h-6",checked:a(e).is_all_selected,onChange:l[2]||(l[2]=s=>V(a(e).is_all_selected))},null,40,z),[[b,a(e).is_all_selected]]),m(C,{message:a(e).errors.permissions,class:"mt-2 col-start-2 col-span-4 ml-3"},null,8,["message"])]),c("div",I,[(u(!0),p(x,null,k(g.permissionWithGroup,(s,n)=>(u(),p("div",{key:n},[c("div",M,[c("input",{type:"checkbox",id:"group_name",value:a(e).group_name,class:"checkbox mr-1 w-5 h-5",checked:a(e).group_name.includes(n),onClick:o=>w(n)},null,8,N),m(d,{for:"group_name",value:n,class:"text-xl capitalize border-b-2 border-gray-700 border-spacing-2 pb-0.5"},null,8,["value"])]),(u(!0),p(x,null,k(s,o=>(u(),p("div",{key:o.id,class:"flex"},[v(c("input",{type:"checkbox",id:"permissions",value:o.name,"onUpdate:modelValue":r=>a(e).permissions=r,class:"checkbox mr-1"},null,8,A),[[b,a(e).permissions]]),m(d,{for:"permissions",value:o.name},null,8,["value"])]))),128))]))),128))]),c("div",D,[m(O,{disabled:a(e).processing},{default:y(()=>[F("Submit")]),_:1},8,["disabled"]),m($,{"enter-from-class":"opacity-0","leave-to-class":"opacity-0",class:"transition ease-in-out"},{default:y(()=>[a(e).recentlySuccessful?(u(),p("p",L," Saved. ")):G("",!0)]),_:1})])],40,B)]))}};export{X as default};
