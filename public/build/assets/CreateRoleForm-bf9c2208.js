import{v as W,G as $,h as u,b as c,a as m,u as o,f as v,x as b,F as x,m as k,w as y,S as j,e as G,o as p,d as E,q as O}from"./app-126fe506.js";import{a as C,_ as d}from"./InputLabel-3684cf6d.js";import{_ as U}from"./PrimaryButton-23f4d7f0.js";import{_ as B}from"./TextInput-6edb0220.js";const F=["onSubmit"],R={class:"grid grid-cols-6 justify-items-start gap-1"},z={class:"flex items-center gap-1 my-5"},I=["checked"],M={class:"grid md:grid-cols-4 grid-cols-3 gap-5 pr-5 sm:pr-0"},N={class:"flex items-center gap-1 mb-5"},T=["value","checked","onClick"],q=["value","onUpdate:modelValue"],A={class:"flex items-center justify-end pr-5 py-5"},D={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Q={__name:"CreateRoleForm",props:{permissionWithGroup:Object,permissions:Object,all_group:Object,total_permissions:String,total_group:String},setup(g){const i=g,e=W({name:"",permissions:[],group_name:[],is_all_selected:!1}),S=t=>{t?(e.permissions=_.clone(i.permissions),e.group_name=_.clone(i.all_group)):(e.permissions=[],e.group_name=[])},h=t=>{let l="";for(const s in i.permissionWithGroup){let a=i.permissionWithGroup[s].find(r=>r.name==t);a&&(l=a==null?void 0:a.group_name)}return l};$(()=>e.permissions,(t,l)=>{let s="";l.length>t.length?s=h(_.difference(l,t)[0]):l.length<t.length&&(s=h(_.last(t)));let n=_.includes(e.group_name,s),a=i.permissionWithGroup[s],r=_.filter(t,function(f){return f.indexOf(s)>-1});t.length==i.permissions.length?(e.is_all_selected=!0,e.group_name=_.clone(i.all_group)):e.is_all_selected=!1,n&&(a==null?void 0:a.length)!==(r==null?void 0:r.length)?_.remove(e.group_name,f=>f===s):!n&&(a==null?void 0:a.length)==(r==null?void 0:r.length)&&(_.includes(e.group_name,s)||e.group_name.push(s))});const V=t=>{let l=i.permissionWithGroup[t];_.includes(e.group_name,t)?(_.remove(e.group_name,s=>s===t),_.forEach(l,function(s){_.remove(e.permissions,n=>n===s.name)})):(e.group_name.push(t),_.forEach(l,function(s){_.includes(e.permissions,s.name)||e.permissions.push(s.name)})),e.group_name.length==i.total_group?e.is_all_selected=!0:e.is_all_selected=!1},w=()=>{e.post(route("role.store"),{preserveScroll:!0,onSuccess:()=>e.reset(),onError:()=>{e.errors.name&&(e.reset("name"),nameInput.value.focus()),e.errors.permissions&&e.reset("permissions")}})};return(t,l)=>(p(),u("section",null,[c("form",{onSubmit:G(w,["prevent"]),class:"mt-6 space-y-6 p-3"},[c("div",R,[m(d,{for:"current_password",value:"Role Name :",class:"text-xl self-center"}),m(B,{id:"name",ref:"nameInput",modelValue:o(e).name,"onUpdate:modelValue":l[0]||(l[0]=s=>o(e).name=s),type:"text",class:"mt-1 block w-full col-span-5",autocomplete:"name"},null,8,["modelValue"]),m(C,{message:o(e).errors.name,class:"mt-2 col-start-2 col-span-4"},null,8,["message"])]),c("div",z,[m(d,{for:"is_all_selected",value:"Select All",class:"text-2xl capitalize mr-2"}),v(c("input",{type:"checkbox",id:"is_all_selected","onUpdate:modelValue":l[1]||(l[1]=s=>o(e).is_all_selected=s),class:"checkbox w-6 h-6",checked:o(e).is_all_selected,onChange:l[2]||(l[2]=s=>S(o(e).is_all_selected))},null,40,I),[[b,o(e).is_all_selected]]),m(C,{message:o(e).errors.permissions,class:"mt-2 col-start-2 col-span-4 ml-3"},null,8,["message"])]),c("div",M,[(p(!0),u(x,null,k(g.permissionWithGroup,(s,n)=>(p(),u("div",{key:n},[c("div",N,[c("input",{type:"checkbox",id:"group_name",value:o(e).group_name,class:"checkbox mr-1 w-5 h-5",checked:o(e).group_name.includes(n),onClick:a=>V(n)},null,8,T),m(d,{for:"group_name",value:n,class:"text-xl capitalize border-b-2 border-gray-700 border-spacing-2 pb-0.5"},null,8,["value"])]),(p(!0),u(x,null,k(s,a=>(p(),u("div",{key:a.id,class:"flex"},[v(c("input",{type:"checkbox",id:"permissions",value:a.name,"onUpdate:modelValue":r=>o(e).permissions=r,class:"checkbox mr-1"},null,8,q),[[b,o(e).permissions]]),m(d,{for:"permissions",value:a.name},null,8,["value"])]))),128))]))),128))]),c("div",A,[m(U,{disabled:o(e).processing},{default:y(()=>[E("Submit")]),_:1},8,["disabled"]),m(j,{"enter-from-class":"opacity-0","leave-to-class":"opacity-0",class:"transition ease-in-out"},{default:y(()=>[o(e).recentlySuccessful?(p(),u("p",D," Saved. ")):O("",!0)]),_:1})])],40,F)]))}};export{Q as default};
